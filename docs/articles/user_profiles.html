<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="flextools">
<title>User profiles in smart charging • flextools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="User profiles in smart charging">
<meta property="og:description" content="flextools">
<meta property="og:image" content="mcanigueral.github.io/flextools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">flextools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/flextools.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <h6 class="dropdown-header" data-toc-skip>Optimization problems</h6>
    <a class="dropdown-item" href="../articles/minimize_net_power.html">Net power optimization</a>
    <a class="dropdown-item" href="../articles/minimize_cost.html">Energy cost optimization</a>
    <a class="dropdown-item" href="../articles/combined_optimization.html">Combined optimization</a>
    <div class="dropdown-divider"></div>
    <h6 class="dropdown-header" data-toc-skip>Demand-response</h6>
    <a class="dropdown-item" href="../articles/smart_charging.html">Smart charging</a>
    <a class="dropdown-item" href="../articles/user_profiles.html">User profiles in smart charging</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">



<link href="user_profiles_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="user_profiles_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><link href="user_profiles_files/dygraphs-1.1.1/dygraph.css" rel="stylesheet">
<script src="user_profiles_files/dygraphs-1.1.1/dygraph-combined.js"></script><script src="user_profiles_files/dygraphs-1.1.1/shapes.js"></script><script src="user_profiles_files/moment-2.8.4/moment.js"></script><script src="user_profiles_files/moment-timezone-0.2.5/moment-timezone-with-data.js"></script><script src="user_profiles_files/moment-fquarter-1.0.0/moment-fquarter.min.js"></script><script src="user_profiles_files/dygraphs-binding-1.1.1.6/dygraphs.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>User profiles in smart charging</h1>
            
      
      
      <div class="d-none name"><code>user_profiles.Rmd</code></div>
    </div>

    
    
<p>This article is based on the <a href="https://mcanigueral.github.io/evprof/articles/evprof.html" class="external-link">EV user
profile concept</a> from package <code>evprof</code>, and how the
extra-knowledge that a classification of EV users into user profiles
could help in the smart charging ecosystem.</p>
<p>A <strong>user profile</strong> is defined by a pattern in the
connection times of EV users, so in most of cases, there are EV user
profiles with more flexibility potential than others. A Charging Point
Operator (CPO) can take advantage of this knowledge and use this
classification to set priorities when scheduling EV charging
sessions.</p>
<p>Shifting only the sessions of specific EV user profiles can increase
the efficiency of the system since the forecast of the flexibility
potential form EV users is more reliable. The lower number of EV
sessions that have to be re-scheduled, the better the solution, for both
the CPO and the final EV user.</p>
<div class="section level2">
<h2 id="ev-charging-sessions-simulation">EV charging sessions simulation<a class="anchor" aria-label="anchor" href="#ev-charging-sessions-simulation"></a>
</h2>
<p>First of all, we can simulate EV sessions using the
<code>evsim</code> package, which provides the function
<code><a href="mcanigueral.github.io/evsim/reference/get_custom_ev_model.html">evsim::get_custom_ev_model</a></code> to create a custom EV model to
later simulate EV sessions with <code><a href="mcanigueral.github.io/evsim/reference/simulate_sessions.html">evsim::simulate_sessions()</a></code>
function. We can create an EV model with custom time-cycles and user
profiles. In this case, we will consider two different EV user
profiles:</p>
<ul>
<li>
<strong>Worktime</strong>: present during working days.
Low-variability in connection times. High flexibility potential.</li>
<li>
<strong>Visit</strong>: present the whole week but with different
behaviour on weekends. High variability in connection times. Low
flexibility potential.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># For workdays time cycle</span></span>
<span><span class="va">workdays_parameters</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  profile <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Worktime"</span>, <span class="st">"Visit"</span><span class="op">)</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>  start_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">9</span>, <span class="fl">11</span><span class="op">)</span>,</span>
<span>  start_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  duration_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8</span>, <span class="fl">4</span><span class="op">)</span>,</span>
<span>  duration_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">2</span><span class="op">)</span>,</span>
<span>  energy_mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">6</span><span class="op">)</span>,</span>
<span>  energy_sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">3</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># For weekends time cycle</span></span>
<span><span class="va">weekends_parameters</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  profile <span class="op">=</span> <span class="st">"Visit"</span>,</span>
<span>  ratio <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  start_mean <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  start_sd <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  duration_mean <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  duration_sd <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  energy_mean <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  energy_sd <span class="op">=</span> <span class="fl">4</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">parameters_lst</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">workdays_parameters</span>, <span class="va">weekends_parameters</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the whole model</span></span>
<span><span class="va">ev_model</span> <span class="op">&lt;-</span> <span class="fu">get_custom_ev_model</span><span class="op">(</span></span>
<span>  names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Workdays"</span>, <span class="st">"Weekends"</span><span class="op">)</span>,</span>
<span>  months_lst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">12</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span>,</span>
<span>  wdays_lst <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fl">6</span><span class="op">:</span><span class="fl">7</span><span class="op">)</span>,</span>
<span>  parameters_lst <span class="op">=</span> <span class="va">parameters_lst</span>,</span>
<span>  connection_log <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  energy_log <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  data_tz <span class="op">=</span> <span class="st">"Europe/Amsterdam"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Once we have our own model, we can simulate EV sessions for three
different days as example:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">12345</span><span class="op">)</span></span>
<span><span class="va">ev_sessions</span> <span class="op">&lt;-</span> <span class="fu">simulate_sessions</span><span class="op">(</span></span>
<span>  evmodel <span class="op">=</span> <span class="va">ev_model</span>, </span>
<span>  sessions_day <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>time_cycle <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Workdays"</span>, <span class="st">"Weekends"</span><span class="op">)</span>, n_sessions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  user_profiles <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  charging_powers <span class="op">=</span> <span class="fu">tibble</span><span class="op">(</span>power <span class="op">=</span> <span class="fl">3.7</span>, ratio <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, </span>
<span>  dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.Date.html" class="external-link">seq.Date</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fu">today</span><span class="op">(</span><span class="op">)</span>, to <span class="op">=</span> <span class="fu">today</span><span class="op">(</span><span class="op">)</span><span class="op">+</span><span class="fu">days</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span>, </span>
<span>  resolution <span class="op">=</span> <span class="fl">15</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 30 × 11</span></span></span>
<span><span class="co">##    Session Timecycle Profile  ConnectionStartDateTime ConnectionEndDateTime</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>               </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> S1      Workdays  Visit    2024-08-08 <span style="color: #949494;">04:00:00</span>     2024-08-08 <span style="color: #949494;">05:25:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> S2      Workdays  Visit    2024-08-08 <span style="color: #949494;">07:30:00</span>     2024-08-08 <span style="color: #949494;">10:46:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> S3      Workdays  Worktime 2024-08-08 <span style="color: #949494;">08:15:00</span>     2024-08-08 <span style="color: #949494;">16:30:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> S4      Workdays  Worktime 2024-08-08 <span style="color: #949494;">08:30:00</span>     2024-08-08 <span style="color: #949494;">16:41:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> S5      Workdays  Worktime 2024-08-08 <span style="color: #949494;">08:30:00</span>     2024-08-08 <span style="color: #949494;">17:46:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> S6      Workdays  Worktime 2024-08-08 <span style="color: #949494;">09:30:00</span>     2024-08-08 <span style="color: #949494;">17:29:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> S7      Workdays  Visit    2024-08-08 <span style="color: #949494;">10:00:00</span>     2024-08-08 <span style="color: #949494;">19:28:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> S8      Workdays  Visit    2024-08-08 <span style="color: #949494;">10:30:00</span>     2024-08-08 <span style="color: #949494;">16:21:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> S9      Workdays  Visit    2024-08-08 <span style="color: #949494;">10:45:00</span>     2024-08-08 <span style="color: #949494;">18:32:00</span>  </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> S10     Workdays  Visit    2024-08-08 <span style="color: #949494;">16:30:00</span>     2024-08-08 <span style="color: #949494;">18:08:00</span>  </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 20 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 6 more variables: ChargingStartDateTime &lt;dttm&gt;, ChargingEndDateTime &lt;dttm&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   Power &lt;dbl&gt;, Energy &lt;dbl&gt;, ConnectionHours &lt;dbl&gt;, ChargingHours &lt;dbl&gt;</span></span></span></code></pre>
<p>Finally we can calculate the time-series power demand from each EV
with function <code><a href="mcanigueral.github.io/evsim/reference/get_demand.html">evsim::get_demand()</a></code>, using parameter
<code>by="Sessions"</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_demand</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">get_demand</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"Profile"</span><span class="op">)</span> </span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Visit","Worktime"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":250,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[],"format":"date","data":[["2024-08-07T22:00:00.000Z","2024-08-07T22:15:00.000Z","2024-08-07T22:30:00.000Z","2024-08-07T22:45:00.000Z","2024-08-07T23:00:00.000Z","2024-08-07T23:15:00.000Z","2024-08-07T23:30:00.000Z","2024-08-07T23:45:00.000Z","2024-08-08T00:00:00.000Z","2024-08-08T00:15:00.000Z","2024-08-08T00:30:00.000Z","2024-08-08T00:45:00.000Z","2024-08-08T01:00:00.000Z","2024-08-08T01:15:00.000Z","2024-08-08T01:30:00.000Z","2024-08-08T01:45:00.000Z","2024-08-08T02:00:00.000Z","2024-08-08T02:15:00.000Z","2024-08-08T02:30:00.000Z","2024-08-08T02:45:00.000Z","2024-08-08T03:00:00.000Z","2024-08-08T03:15:00.000Z","2024-08-08T03:30:00.000Z","2024-08-08T03:45:00.000Z","2024-08-08T04:00:00.000Z","2024-08-08T04:15:00.000Z","2024-08-08T04:30:00.000Z","2024-08-08T04:45:00.000Z","2024-08-08T05:00:00.000Z","2024-08-08T05:15:00.000Z","2024-08-08T05:30:00.000Z","2024-08-08T05:45:00.000Z","2024-08-08T06:00:00.000Z","2024-08-08T06:15:00.000Z","2024-08-08T06:30:00.000Z","2024-08-08T06:45:00.000Z","2024-08-08T07:00:00.000Z","2024-08-08T07:15:00.000Z","2024-08-08T07:30:00.000Z","2024-08-08T07:45:00.000Z","2024-08-08T08:00:00.000Z","2024-08-08T08:15:00.000Z","2024-08-08T08:30:00.000Z","2024-08-08T08:45:00.000Z","2024-08-08T09:00:00.000Z","2024-08-08T09:15:00.000Z","2024-08-08T09:30:00.000Z","2024-08-08T09:45:00.000Z","2024-08-08T10:00:00.000Z","2024-08-08T10:15:00.000Z","2024-08-08T10:30:00.000Z","2024-08-08T10:45:00.000Z","2024-08-08T11:00:00.000Z","2024-08-08T11:15:00.000Z","2024-08-08T11:30:00.000Z","2024-08-08T11:45:00.000Z","2024-08-08T12:00:00.000Z","2024-08-08T12:15:00.000Z","2024-08-08T12:30:00.000Z","2024-08-08T12:45:00.000Z","2024-08-08T13:00:00.000Z","2024-08-08T13:15:00.000Z","2024-08-08T13:30:00.000Z","2024-08-08T13:45:00.000Z","2024-08-08T14:00:00.000Z","2024-08-08T14:15:00.000Z","2024-08-08T14:30:00.000Z","2024-08-08T14:45:00.000Z","2024-08-08T15:00:00.000Z","2024-08-08T15:15:00.000Z","2024-08-08T15:30:00.000Z","2024-08-08T15:45:00.000Z","2024-08-08T16:00:00.000Z","2024-08-08T16:15:00.000Z","2024-08-08T16:30:00.000Z","2024-08-08T16:45:00.000Z","2024-08-08T17:00:00.000Z","2024-08-08T17:15:00.000Z","2024-08-08T17:30:00.000Z","2024-08-08T17:45:00.000Z","2024-08-08T18:00:00.000Z","2024-08-08T18:15:00.000Z","2024-08-08T18:30:00.000Z","2024-08-08T18:45:00.000Z","2024-08-08T19:00:00.000Z","2024-08-08T19:15:00.000Z","2024-08-08T19:30:00.000Z","2024-08-08T19:45:00.000Z","2024-08-08T20:00:00.000Z","2024-08-08T20:15:00.000Z","2024-08-08T20:30:00.000Z","2024-08-08T20:45:00.000Z","2024-08-08T21:00:00.000Z","2024-08-08T21:15:00.000Z","2024-08-08T21:30:00.000Z","2024-08-08T21:45:00.000Z","2024-08-08T22:00:00.000Z","2024-08-08T22:15:00.000Z","2024-08-08T22:30:00.000Z","2024-08-08T22:45:00.000Z","2024-08-08T23:00:00.000Z","2024-08-08T23:15:00.000Z","2024-08-08T23:30:00.000Z","2024-08-08T23:45:00.000Z","2024-08-09T00:00:00.000Z","2024-08-09T00:15:00.000Z","2024-08-09T00:30:00.000Z","2024-08-09T00:45:00.000Z","2024-08-09T01:00:00.000Z","2024-08-09T01:15:00.000Z","2024-08-09T01:30:00.000Z","2024-08-09T01:45:00.000Z","2024-08-09T02:00:00.000Z","2024-08-09T02:15:00.000Z","2024-08-09T02:30:00.000Z","2024-08-09T02:45:00.000Z","2024-08-09T03:00:00.000Z","2024-08-09T03:15:00.000Z","2024-08-09T03:30:00.000Z","2024-08-09T03:45:00.000Z","2024-08-09T04:00:00.000Z","2024-08-09T04:15:00.000Z","2024-08-09T04:30:00.000Z","2024-08-09T04:45:00.000Z","2024-08-09T05:00:00.000Z","2024-08-09T05:15:00.000Z","2024-08-09T05:30:00.000Z","2024-08-09T05:45:00.000Z","2024-08-09T06:00:00.000Z","2024-08-09T06:15:00.000Z","2024-08-09T06:30:00.000Z","2024-08-09T06:45:00.000Z","2024-08-09T07:00:00.000Z","2024-08-09T07:15:00.000Z","2024-08-09T07:30:00.000Z","2024-08-09T07:45:00.000Z","2024-08-09T08:00:00.000Z","2024-08-09T08:15:00.000Z","2024-08-09T08:30:00.000Z","2024-08-09T08:45:00.000Z","2024-08-09T09:00:00.000Z","2024-08-09T09:15:00.000Z","2024-08-09T09:30:00.000Z","2024-08-09T09:45:00.000Z","2024-08-09T10:00:00.000Z","2024-08-09T10:15:00.000Z","2024-08-09T10:30:00.000Z","2024-08-09T10:45:00.000Z","2024-08-09T11:00:00.000Z","2024-08-09T11:15:00.000Z","2024-08-09T11:30:00.000Z","2024-08-09T11:45:00.000Z","2024-08-09T12:00:00.000Z","2024-08-09T12:15:00.000Z","2024-08-09T12:30:00.000Z","2024-08-09T12:45:00.000Z","2024-08-09T13:00:00.000Z","2024-08-09T13:15:00.000Z","2024-08-09T13:30:00.000Z","2024-08-09T13:45:00.000Z","2024-08-09T14:00:00.000Z","2024-08-09T14:15:00.000Z","2024-08-09T14:30:00.000Z","2024-08-09T14:45:00.000Z","2024-08-09T15:00:00.000Z","2024-08-09T15:15:00.000Z","2024-08-09T15:30:00.000Z","2024-08-09T15:45:00.000Z","2024-08-09T16:00:00.000Z","2024-08-09T16:15:00.000Z","2024-08-09T16:30:00.000Z","2024-08-09T16:45:00.000Z","2024-08-09T17:00:00.000Z","2024-08-09T17:15:00.000Z","2024-08-09T17:30:00.000Z","2024-08-09T17:45:00.000Z","2024-08-09T18:00:00.000Z","2024-08-09T18:15:00.000Z","2024-08-09T18:30:00.000Z","2024-08-09T18:45:00.000Z","2024-08-09T19:00:00.000Z","2024-08-09T19:15:00.000Z","2024-08-09T19:30:00.000Z","2024-08-09T19:45:00.000Z","2024-08-09T20:00:00.000Z","2024-08-09T20:15:00.000Z","2024-08-09T20:30:00.000Z","2024-08-09T20:45:00.000Z","2024-08-09T21:00:00.000Z","2024-08-09T21:15:00.000Z","2024-08-09T21:30:00.000Z","2024-08-09T21:45:00.000Z","2024-08-09T22:00:00.000Z","2024-08-09T22:15:00.000Z","2024-08-09T22:30:00.000Z","2024-08-09T22:45:00.000Z","2024-08-09T23:00:00.000Z","2024-08-09T23:15:00.000Z","2024-08-09T23:30:00.000Z","2024-08-09T23:45:00.000Z","2024-08-10T00:00:00.000Z","2024-08-10T00:15:00.000Z","2024-08-10T00:30:00.000Z","2024-08-10T00:45:00.000Z","2024-08-10T01:00:00.000Z","2024-08-10T01:15:00.000Z","2024-08-10T01:30:00.000Z","2024-08-10T01:45:00.000Z","2024-08-10T02:00:00.000Z","2024-08-10T02:15:00.000Z","2024-08-10T02:30:00.000Z","2024-08-10T02:45:00.000Z","2024-08-10T03:00:00.000Z","2024-08-10T03:15:00.000Z","2024-08-10T03:30:00.000Z","2024-08-10T03:45:00.000Z","2024-08-10T04:00:00.000Z","2024-08-10T04:15:00.000Z","2024-08-10T04:30:00.000Z","2024-08-10T04:45:00.000Z","2024-08-10T05:00:00.000Z","2024-08-10T05:15:00.000Z","2024-08-10T05:30:00.000Z","2024-08-10T05:45:00.000Z","2024-08-10T06:00:00.000Z","2024-08-10T06:15:00.000Z","2024-08-10T06:30:00.000Z","2024-08-10T06:45:00.000Z","2024-08-10T07:00:00.000Z","2024-08-10T07:15:00.000Z","2024-08-10T07:30:00.000Z","2024-08-10T07:45:00.000Z","2024-08-10T08:00:00.000Z","2024-08-10T08:15:00.000Z","2024-08-10T08:30:00.000Z","2024-08-10T08:45:00.000Z","2024-08-10T09:00:00.000Z","2024-08-10T09:15:00.000Z","2024-08-10T09:30:00.000Z","2024-08-10T09:45:00.000Z","2024-08-10T10:00:00.000Z","2024-08-10T10:15:00.000Z","2024-08-10T10:30:00.000Z","2024-08-10T10:45:00.000Z","2024-08-10T11:00:00.000Z","2024-08-10T11:15:00.000Z","2024-08-10T11:30:00.000Z","2024-08-10T11:45:00.000Z","2024-08-10T12:00:00.000Z","2024-08-10T12:15:00.000Z","2024-08-10T12:30:00.000Z","2024-08-10T12:45:00.000Z","2024-08-10T13:00:00.000Z","2024-08-10T13:15:00.000Z","2024-08-10T13:30:00.000Z","2024-08-10T13:45:00.000Z","2024-08-10T14:00:00.000Z","2024-08-10T14:15:00.000Z","2024-08-10T14:30:00.000Z","2024-08-10T14:45:00.000Z","2024-08-10T15:00:00.000Z","2024-08-10T15:15:00.000Z","2024-08-10T15:30:00.000Z","2024-08-10T15:45:00.000Z","2024-08-10T16:00:00.000Z","2024-08-10T16:15:00.000Z","2024-08-10T16:30:00.000Z","2024-08-10T16:45:00.000Z","2024-08-10T17:00:00.000Z","2024-08-10T17:15:00.000Z","2024-08-10T17:30:00.000Z","2024-08-10T17:45:00.000Z","2024-08-10T18:00:00.000Z","2024-08-10T18:15:00.000Z","2024-08-10T18:30:00.000Z","2024-08-10T18:45:00.000Z","2024-08-10T19:00:00.000Z","2024-08-10T19:15:00.000Z","2024-08-10T19:30:00.000Z","2024-08-10T19:45:00.000Z","2024-08-10T20:00:00.000Z","2024-08-10T20:15:00.000Z","2024-08-10T20:30:00.000Z","2024-08-10T20:45:00.000Z","2024-08-10T21:00:00.000Z","2024-08-10T21:15:00.000Z","2024-08-10T21:30:00.000Z","2024-08-10T21:45:00.000Z","2024-08-10T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.24,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0.46,0,0,3.7,3.7,7.4,11.1,11.1,8.9,7.4,7.4,7.4,7.4,4.140000000000001,3.7,3.7,3.7,2.82,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.42,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,0.88,0,3.7,3.7,3.7,3.42,3.7,3.7,2.96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,1.04,3.7,3.7,7.4,7.4,4,0,3.7,3.7,3.7,2.5,0,3.7,3.7,3.4,3.7,3.7,3.7,3.7,7.4,7.4,4.74,0.58,3.7,3.7,1.92,0,3.7,3.7,3.7,3.7,3.12,0,0,3.7,3.7,3.7,3.7,1.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,11.1,11.1,11.1,11.1,14.8,14.8,14.8,14.8,14.8,14.8,14.8,11.84,11.1,11.1,11.1,11.1,11.1,8.300000000000001,5.34,2.08,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,7.4,11.1,14.8,14.8,14.8,14.8,18.5,18.5,25.9,22.22,20.14,18.5,18.5,17.9,14.8,14.8,14.8,14.8,11.4,11.1,7.86,2.06,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="section level2">
<h2 id="smart-charging-to-solve-grid-congestion">Smart charging to solve grid congestion<a class="anchor" aria-label="anchor" href="#smart-charging-to-solve-grid-congestion"></a>
</h2>
<p>Imagine that we have to charge these EVs in an installation that has
a <strong>maximum grid connection of 12 kW</strong>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid_capacity</span> <span class="op">&lt;-</span> <span class="fl">12</span></span></code></pre></div>
<p>Since our peak goes above 12kW, we need to use smart charging to
allow the EV users to charge under the grid capacity. In our case, we
decide to only use the flexibility from the <strong>Worktime user
profile</strong>, since it has a clear flexibility potential compared to
the Visit user profile.</p>
<p>In order to define a <strong>grid capacity</strong> in the
<code>smart_charing()</code> function, a column with the same name than
the EV user profile in the <code>sessions</code> parameter (in this
example “Worktime”) must be found in the <code>opt_data</code>
parameter. Therefore, a <code>"Worktime"</code> column is added to the
<code>opt_data</code> object as a setpoint for the EV user profile
“Worktime”, and it is defined as the <strong>difference between the grid
capacity and the rest of power demand</strong> (in this case the “Visit”
demand):</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt_data</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="op">(</span></span>
<span>  datetime <span class="op">=</span> <span class="va">ev_demand</span><span class="op">$</span><span class="va">datetime</span>, <span class="co"># Same date-time sequence than the demand</span></span>
<span>  Worktime <span class="op">=</span> <span class="va">grid_capacity</span> <span class="op">-</span> <span class="va">ev_demand</span><span class="op">$</span><span class="va">Visit</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">opt_data</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyplot</span><span class="op">(</span>ylab <span class="op">=</span> <span class="st">"Power demand (kW)"</span>, stackedGraph <span class="op">=</span> <span class="cn">T</span>, fillGraph <span class="op">=</span> <span class="cn">T</span>, legend_width <span class="op">=</span> <span class="fl">200</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dySeries</span><span class="op">(</span><span class="st">"Worktime"</span>, <span class="st">"Worktime free capacity"</span>, color <span class="op">=</span> <span class="st">"navy"</span>, strokeWidth <span class="op">=</span> <span class="fl">2</span>, strokePattern <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dyLimit</span><span class="op">(</span><span class="va">grid_capacity</span>, <span class="st">"Grid capacity"</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span></span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-e5c8c404fe174e4c81bd" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-e5c8c404fe174e4c81bd">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Worktime free capacity"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":200,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false,"colors":["navy","navy"],"series":{"Worktime free capacity":{"axis":"y","strokeWidth":2,"strokePattern":[7,3]}}},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-07T22:00:00.000Z","2024-08-07T22:15:00.000Z","2024-08-07T22:30:00.000Z","2024-08-07T22:45:00.000Z","2024-08-07T23:00:00.000Z","2024-08-07T23:15:00.000Z","2024-08-07T23:30:00.000Z","2024-08-07T23:45:00.000Z","2024-08-08T00:00:00.000Z","2024-08-08T00:15:00.000Z","2024-08-08T00:30:00.000Z","2024-08-08T00:45:00.000Z","2024-08-08T01:00:00.000Z","2024-08-08T01:15:00.000Z","2024-08-08T01:30:00.000Z","2024-08-08T01:45:00.000Z","2024-08-08T02:00:00.000Z","2024-08-08T02:15:00.000Z","2024-08-08T02:30:00.000Z","2024-08-08T02:45:00.000Z","2024-08-08T03:00:00.000Z","2024-08-08T03:15:00.000Z","2024-08-08T03:30:00.000Z","2024-08-08T03:45:00.000Z","2024-08-08T04:00:00.000Z","2024-08-08T04:15:00.000Z","2024-08-08T04:30:00.000Z","2024-08-08T04:45:00.000Z","2024-08-08T05:00:00.000Z","2024-08-08T05:15:00.000Z","2024-08-08T05:30:00.000Z","2024-08-08T05:45:00.000Z","2024-08-08T06:00:00.000Z","2024-08-08T06:15:00.000Z","2024-08-08T06:30:00.000Z","2024-08-08T06:45:00.000Z","2024-08-08T07:00:00.000Z","2024-08-08T07:15:00.000Z","2024-08-08T07:30:00.000Z","2024-08-08T07:45:00.000Z","2024-08-08T08:00:00.000Z","2024-08-08T08:15:00.000Z","2024-08-08T08:30:00.000Z","2024-08-08T08:45:00.000Z","2024-08-08T09:00:00.000Z","2024-08-08T09:15:00.000Z","2024-08-08T09:30:00.000Z","2024-08-08T09:45:00.000Z","2024-08-08T10:00:00.000Z","2024-08-08T10:15:00.000Z","2024-08-08T10:30:00.000Z","2024-08-08T10:45:00.000Z","2024-08-08T11:00:00.000Z","2024-08-08T11:15:00.000Z","2024-08-08T11:30:00.000Z","2024-08-08T11:45:00.000Z","2024-08-08T12:00:00.000Z","2024-08-08T12:15:00.000Z","2024-08-08T12:30:00.000Z","2024-08-08T12:45:00.000Z","2024-08-08T13:00:00.000Z","2024-08-08T13:15:00.000Z","2024-08-08T13:30:00.000Z","2024-08-08T13:45:00.000Z","2024-08-08T14:00:00.000Z","2024-08-08T14:15:00.000Z","2024-08-08T14:30:00.000Z","2024-08-08T14:45:00.000Z","2024-08-08T15:00:00.000Z","2024-08-08T15:15:00.000Z","2024-08-08T15:30:00.000Z","2024-08-08T15:45:00.000Z","2024-08-08T16:00:00.000Z","2024-08-08T16:15:00.000Z","2024-08-08T16:30:00.000Z","2024-08-08T16:45:00.000Z","2024-08-08T17:00:00.000Z","2024-08-08T17:15:00.000Z","2024-08-08T17:30:00.000Z","2024-08-08T17:45:00.000Z","2024-08-08T18:00:00.000Z","2024-08-08T18:15:00.000Z","2024-08-08T18:30:00.000Z","2024-08-08T18:45:00.000Z","2024-08-08T19:00:00.000Z","2024-08-08T19:15:00.000Z","2024-08-08T19:30:00.000Z","2024-08-08T19:45:00.000Z","2024-08-08T20:00:00.000Z","2024-08-08T20:15:00.000Z","2024-08-08T20:30:00.000Z","2024-08-08T20:45:00.000Z","2024-08-08T21:00:00.000Z","2024-08-08T21:15:00.000Z","2024-08-08T21:30:00.000Z","2024-08-08T21:45:00.000Z","2024-08-08T22:00:00.000Z","2024-08-08T22:15:00.000Z","2024-08-08T22:30:00.000Z","2024-08-08T22:45:00.000Z","2024-08-08T23:00:00.000Z","2024-08-08T23:15:00.000Z","2024-08-08T23:30:00.000Z","2024-08-08T23:45:00.000Z","2024-08-09T00:00:00.000Z","2024-08-09T00:15:00.000Z","2024-08-09T00:30:00.000Z","2024-08-09T00:45:00.000Z","2024-08-09T01:00:00.000Z","2024-08-09T01:15:00.000Z","2024-08-09T01:30:00.000Z","2024-08-09T01:45:00.000Z","2024-08-09T02:00:00.000Z","2024-08-09T02:15:00.000Z","2024-08-09T02:30:00.000Z","2024-08-09T02:45:00.000Z","2024-08-09T03:00:00.000Z","2024-08-09T03:15:00.000Z","2024-08-09T03:30:00.000Z","2024-08-09T03:45:00.000Z","2024-08-09T04:00:00.000Z","2024-08-09T04:15:00.000Z","2024-08-09T04:30:00.000Z","2024-08-09T04:45:00.000Z","2024-08-09T05:00:00.000Z","2024-08-09T05:15:00.000Z","2024-08-09T05:30:00.000Z","2024-08-09T05:45:00.000Z","2024-08-09T06:00:00.000Z","2024-08-09T06:15:00.000Z","2024-08-09T06:30:00.000Z","2024-08-09T06:45:00.000Z","2024-08-09T07:00:00.000Z","2024-08-09T07:15:00.000Z","2024-08-09T07:30:00.000Z","2024-08-09T07:45:00.000Z","2024-08-09T08:00:00.000Z","2024-08-09T08:15:00.000Z","2024-08-09T08:30:00.000Z","2024-08-09T08:45:00.000Z","2024-08-09T09:00:00.000Z","2024-08-09T09:15:00.000Z","2024-08-09T09:30:00.000Z","2024-08-09T09:45:00.000Z","2024-08-09T10:00:00.000Z","2024-08-09T10:15:00.000Z","2024-08-09T10:30:00.000Z","2024-08-09T10:45:00.000Z","2024-08-09T11:00:00.000Z","2024-08-09T11:15:00.000Z","2024-08-09T11:30:00.000Z","2024-08-09T11:45:00.000Z","2024-08-09T12:00:00.000Z","2024-08-09T12:15:00.000Z","2024-08-09T12:30:00.000Z","2024-08-09T12:45:00.000Z","2024-08-09T13:00:00.000Z","2024-08-09T13:15:00.000Z","2024-08-09T13:30:00.000Z","2024-08-09T13:45:00.000Z","2024-08-09T14:00:00.000Z","2024-08-09T14:15:00.000Z","2024-08-09T14:30:00.000Z","2024-08-09T14:45:00.000Z","2024-08-09T15:00:00.000Z","2024-08-09T15:15:00.000Z","2024-08-09T15:30:00.000Z","2024-08-09T15:45:00.000Z","2024-08-09T16:00:00.000Z","2024-08-09T16:15:00.000Z","2024-08-09T16:30:00.000Z","2024-08-09T16:45:00.000Z","2024-08-09T17:00:00.000Z","2024-08-09T17:15:00.000Z","2024-08-09T17:30:00.000Z","2024-08-09T17:45:00.000Z","2024-08-09T18:00:00.000Z","2024-08-09T18:15:00.000Z","2024-08-09T18:30:00.000Z","2024-08-09T18:45:00.000Z","2024-08-09T19:00:00.000Z","2024-08-09T19:15:00.000Z","2024-08-09T19:30:00.000Z","2024-08-09T19:45:00.000Z","2024-08-09T20:00:00.000Z","2024-08-09T20:15:00.000Z","2024-08-09T20:30:00.000Z","2024-08-09T20:45:00.000Z","2024-08-09T21:00:00.000Z","2024-08-09T21:15:00.000Z","2024-08-09T21:30:00.000Z","2024-08-09T21:45:00.000Z","2024-08-09T22:00:00.000Z","2024-08-09T22:15:00.000Z","2024-08-09T22:30:00.000Z","2024-08-09T22:45:00.000Z","2024-08-09T23:00:00.000Z","2024-08-09T23:15:00.000Z","2024-08-09T23:30:00.000Z","2024-08-09T23:45:00.000Z","2024-08-10T00:00:00.000Z","2024-08-10T00:15:00.000Z","2024-08-10T00:30:00.000Z","2024-08-10T00:45:00.000Z","2024-08-10T01:00:00.000Z","2024-08-10T01:15:00.000Z","2024-08-10T01:30:00.000Z","2024-08-10T01:45:00.000Z","2024-08-10T02:00:00.000Z","2024-08-10T02:15:00.000Z","2024-08-10T02:30:00.000Z","2024-08-10T02:45:00.000Z","2024-08-10T03:00:00.000Z","2024-08-10T03:15:00.000Z","2024-08-10T03:30:00.000Z","2024-08-10T03:45:00.000Z","2024-08-10T04:00:00.000Z","2024-08-10T04:15:00.000Z","2024-08-10T04:30:00.000Z","2024-08-10T04:45:00.000Z","2024-08-10T05:00:00.000Z","2024-08-10T05:15:00.000Z","2024-08-10T05:30:00.000Z","2024-08-10T05:45:00.000Z","2024-08-10T06:00:00.000Z","2024-08-10T06:15:00.000Z","2024-08-10T06:30:00.000Z","2024-08-10T06:45:00.000Z","2024-08-10T07:00:00.000Z","2024-08-10T07:15:00.000Z","2024-08-10T07:30:00.000Z","2024-08-10T07:45:00.000Z","2024-08-10T08:00:00.000Z","2024-08-10T08:15:00.000Z","2024-08-10T08:30:00.000Z","2024-08-10T08:45:00.000Z","2024-08-10T09:00:00.000Z","2024-08-10T09:15:00.000Z","2024-08-10T09:30:00.000Z","2024-08-10T09:45:00.000Z","2024-08-10T10:00:00.000Z","2024-08-10T10:15:00.000Z","2024-08-10T10:30:00.000Z","2024-08-10T10:45:00.000Z","2024-08-10T11:00:00.000Z","2024-08-10T11:15:00.000Z","2024-08-10T11:30:00.000Z","2024-08-10T11:45:00.000Z","2024-08-10T12:00:00.000Z","2024-08-10T12:15:00.000Z","2024-08-10T12:30:00.000Z","2024-08-10T12:45:00.000Z","2024-08-10T13:00:00.000Z","2024-08-10T13:15:00.000Z","2024-08-10T13:30:00.000Z","2024-08-10T13:45:00.000Z","2024-08-10T14:00:00.000Z","2024-08-10T14:15:00.000Z","2024-08-10T14:30:00.000Z","2024-08-10T14:45:00.000Z","2024-08-10T15:00:00.000Z","2024-08-10T15:15:00.000Z","2024-08-10T15:30:00.000Z","2024-08-10T15:45:00.000Z","2024-08-10T16:00:00.000Z","2024-08-10T16:15:00.000Z","2024-08-10T16:30:00.000Z","2024-08-10T16:45:00.000Z","2024-08-10T17:00:00.000Z","2024-08-10T17:15:00.000Z","2024-08-10T17:30:00.000Z","2024-08-10T17:45:00.000Z","2024-08-10T18:00:00.000Z","2024-08-10T18:15:00.000Z","2024-08-10T18:30:00.000Z","2024-08-10T18:45:00.000Z","2024-08-10T19:00:00.000Z","2024-08-10T19:15:00.000Z","2024-08-10T19:30:00.000Z","2024-08-10T19:45:00.000Z","2024-08-10T20:00:00.000Z","2024-08-10T20:15:00.000Z","2024-08-10T20:30:00.000Z","2024-08-10T20:45:00.000Z","2024-08-10T21:00:00.000Z","2024-08-10T21:15:00.000Z","2024-08-10T21:30:00.000Z","2024-08-10T21:45:00.000Z","2024-08-10T22:00:00.000Z"],[12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.76,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,11.54,12,12,8.300000000000001,8.300000000000001,4.6,0.8999999999999986,0.8999999999999986,3.1,4.6,4.6,4.6,4.6,7.859999999999999,8.300000000000001,8.300000000000001,8.300000000000001,9.18,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.58,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,11.12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.58,8.300000000000001,8.300000000000001,9.039999999999999,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.300000000000001,8.300000000000001,10.96,8.300000000000001,8.300000000000001,4.6,4.6,8,12,8.300000000000001,8.300000000000001,8.300000000000001,9.5,12,8.300000000000001,8.300000000000001,8.6,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,4.6,4.6,7.26,11.42,8.300000000000001,8.300000000000001,10.08,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,8.879999999999999,12,12,8.300000000000001,8.300000000000001,8.300000000000001,8.300000000000001,10.96,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><p>Considering optimization windows of 24 hours from 6:00AM to 6:00AM,
and <code>"curtail"</code> as a smart charging method:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sc_results</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/smart_charging.html">smart_charging</a></span><span class="op">(</span></span>
<span>    opt_data <span class="op">=</span> <span class="va">opt_data</span>, </span>
<span>    opt_objective <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"curtail"</span>,</span>
<span>    window_days <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    window_start_hour <span class="op">=</span> <span class="fl">6</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_demand_opt</span> <span class="op">&lt;-</span> <span class="va">sc_results</span><span class="op">$</span><span class="va">sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">get_demand</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"Profile"</span><span class="op">)</span> </span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-36aa3d2a04d42bbc2145" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-36aa3d2a04d42bbc2145">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Visit","Worktime"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":150,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-07T22:00:00.000Z","2024-08-07T22:15:00.000Z","2024-08-07T22:30:00.000Z","2024-08-07T22:45:00.000Z","2024-08-07T23:00:00.000Z","2024-08-07T23:15:00.000Z","2024-08-07T23:30:00.000Z","2024-08-07T23:45:00.000Z","2024-08-08T00:00:00.000Z","2024-08-08T00:15:00.000Z","2024-08-08T00:30:00.000Z","2024-08-08T00:45:00.000Z","2024-08-08T01:00:00.000Z","2024-08-08T01:15:00.000Z","2024-08-08T01:30:00.000Z","2024-08-08T01:45:00.000Z","2024-08-08T02:00:00.000Z","2024-08-08T02:15:00.000Z","2024-08-08T02:30:00.000Z","2024-08-08T02:45:00.000Z","2024-08-08T03:00:00.000Z","2024-08-08T03:15:00.000Z","2024-08-08T03:30:00.000Z","2024-08-08T03:45:00.000Z","2024-08-08T04:00:00.000Z","2024-08-08T04:15:00.000Z","2024-08-08T04:30:00.000Z","2024-08-08T04:45:00.000Z","2024-08-08T05:00:00.000Z","2024-08-08T05:15:00.000Z","2024-08-08T05:30:00.000Z","2024-08-08T05:45:00.000Z","2024-08-08T06:00:00.000Z","2024-08-08T06:15:00.000Z","2024-08-08T06:30:00.000Z","2024-08-08T06:45:00.000Z","2024-08-08T07:00:00.000Z","2024-08-08T07:15:00.000Z","2024-08-08T07:30:00.000Z","2024-08-08T07:45:00.000Z","2024-08-08T08:00:00.000Z","2024-08-08T08:15:00.000Z","2024-08-08T08:30:00.000Z","2024-08-08T08:45:00.000Z","2024-08-08T09:00:00.000Z","2024-08-08T09:15:00.000Z","2024-08-08T09:30:00.000Z","2024-08-08T09:45:00.000Z","2024-08-08T10:00:00.000Z","2024-08-08T10:15:00.000Z","2024-08-08T10:30:00.000Z","2024-08-08T10:45:00.000Z","2024-08-08T11:00:00.000Z","2024-08-08T11:15:00.000Z","2024-08-08T11:30:00.000Z","2024-08-08T11:45:00.000Z","2024-08-08T12:00:00.000Z","2024-08-08T12:15:00.000Z","2024-08-08T12:30:00.000Z","2024-08-08T12:45:00.000Z","2024-08-08T13:00:00.000Z","2024-08-08T13:15:00.000Z","2024-08-08T13:30:00.000Z","2024-08-08T13:45:00.000Z","2024-08-08T14:00:00.000Z","2024-08-08T14:15:00.000Z","2024-08-08T14:30:00.000Z","2024-08-08T14:45:00.000Z","2024-08-08T15:00:00.000Z","2024-08-08T15:15:00.000Z","2024-08-08T15:30:00.000Z","2024-08-08T15:45:00.000Z","2024-08-08T16:00:00.000Z","2024-08-08T16:15:00.000Z","2024-08-08T16:30:00.000Z","2024-08-08T16:45:00.000Z","2024-08-08T17:00:00.000Z","2024-08-08T17:15:00.000Z","2024-08-08T17:30:00.000Z","2024-08-08T17:45:00.000Z","2024-08-08T18:00:00.000Z","2024-08-08T18:15:00.000Z","2024-08-08T18:30:00.000Z","2024-08-08T18:45:00.000Z","2024-08-08T19:00:00.000Z","2024-08-08T19:15:00.000Z","2024-08-08T19:30:00.000Z","2024-08-08T19:45:00.000Z","2024-08-08T20:00:00.000Z","2024-08-08T20:15:00.000Z","2024-08-08T20:30:00.000Z","2024-08-08T20:45:00.000Z","2024-08-08T21:00:00.000Z","2024-08-08T21:15:00.000Z","2024-08-08T21:30:00.000Z","2024-08-08T21:45:00.000Z","2024-08-08T22:00:00.000Z","2024-08-08T22:15:00.000Z","2024-08-08T22:30:00.000Z","2024-08-08T22:45:00.000Z","2024-08-08T23:00:00.000Z","2024-08-08T23:15:00.000Z","2024-08-08T23:30:00.000Z","2024-08-08T23:45:00.000Z","2024-08-09T00:00:00.000Z","2024-08-09T00:15:00.000Z","2024-08-09T00:30:00.000Z","2024-08-09T00:45:00.000Z","2024-08-09T01:00:00.000Z","2024-08-09T01:15:00.000Z","2024-08-09T01:30:00.000Z","2024-08-09T01:45:00.000Z","2024-08-09T02:00:00.000Z","2024-08-09T02:15:00.000Z","2024-08-09T02:30:00.000Z","2024-08-09T02:45:00.000Z","2024-08-09T03:00:00.000Z","2024-08-09T03:15:00.000Z","2024-08-09T03:30:00.000Z","2024-08-09T03:45:00.000Z","2024-08-09T04:00:00.000Z","2024-08-09T04:15:00.000Z","2024-08-09T04:30:00.000Z","2024-08-09T04:45:00.000Z","2024-08-09T05:00:00.000Z","2024-08-09T05:15:00.000Z","2024-08-09T05:30:00.000Z","2024-08-09T05:45:00.000Z","2024-08-09T06:00:00.000Z","2024-08-09T06:15:00.000Z","2024-08-09T06:30:00.000Z","2024-08-09T06:45:00.000Z","2024-08-09T07:00:00.000Z","2024-08-09T07:15:00.000Z","2024-08-09T07:30:00.000Z","2024-08-09T07:45:00.000Z","2024-08-09T08:00:00.000Z","2024-08-09T08:15:00.000Z","2024-08-09T08:30:00.000Z","2024-08-09T08:45:00.000Z","2024-08-09T09:00:00.000Z","2024-08-09T09:15:00.000Z","2024-08-09T09:30:00.000Z","2024-08-09T09:45:00.000Z","2024-08-09T10:00:00.000Z","2024-08-09T10:15:00.000Z","2024-08-09T10:30:00.000Z","2024-08-09T10:45:00.000Z","2024-08-09T11:00:00.000Z","2024-08-09T11:15:00.000Z","2024-08-09T11:30:00.000Z","2024-08-09T11:45:00.000Z","2024-08-09T12:00:00.000Z","2024-08-09T12:15:00.000Z","2024-08-09T12:30:00.000Z","2024-08-09T12:45:00.000Z","2024-08-09T13:00:00.000Z","2024-08-09T13:15:00.000Z","2024-08-09T13:30:00.000Z","2024-08-09T13:45:00.000Z","2024-08-09T14:00:00.000Z","2024-08-09T14:15:00.000Z","2024-08-09T14:30:00.000Z","2024-08-09T14:45:00.000Z","2024-08-09T15:00:00.000Z","2024-08-09T15:15:00.000Z","2024-08-09T15:30:00.000Z","2024-08-09T15:45:00.000Z","2024-08-09T16:00:00.000Z","2024-08-09T16:15:00.000Z","2024-08-09T16:30:00.000Z","2024-08-09T16:45:00.000Z","2024-08-09T17:00:00.000Z","2024-08-09T17:15:00.000Z","2024-08-09T17:30:00.000Z","2024-08-09T17:45:00.000Z","2024-08-09T18:00:00.000Z","2024-08-09T18:15:00.000Z","2024-08-09T18:30:00.000Z","2024-08-09T18:45:00.000Z","2024-08-09T19:00:00.000Z","2024-08-09T19:15:00.000Z","2024-08-09T19:30:00.000Z","2024-08-09T19:45:00.000Z","2024-08-09T20:00:00.000Z","2024-08-09T20:15:00.000Z","2024-08-09T20:30:00.000Z","2024-08-09T20:45:00.000Z","2024-08-09T21:00:00.000Z","2024-08-09T21:15:00.000Z","2024-08-09T21:30:00.000Z","2024-08-09T21:45:00.000Z","2024-08-09T22:00:00.000Z","2024-08-09T22:15:00.000Z","2024-08-09T22:30:00.000Z","2024-08-09T22:45:00.000Z","2024-08-09T23:00:00.000Z","2024-08-09T23:15:00.000Z","2024-08-09T23:30:00.000Z","2024-08-09T23:45:00.000Z","2024-08-10T00:00:00.000Z","2024-08-10T00:15:00.000Z","2024-08-10T00:30:00.000Z","2024-08-10T00:45:00.000Z","2024-08-10T01:00:00.000Z","2024-08-10T01:15:00.000Z","2024-08-10T01:30:00.000Z","2024-08-10T01:45:00.000Z","2024-08-10T02:00:00.000Z","2024-08-10T02:15:00.000Z","2024-08-10T02:30:00.000Z","2024-08-10T02:45:00.000Z","2024-08-10T03:00:00.000Z","2024-08-10T03:15:00.000Z","2024-08-10T03:30:00.000Z","2024-08-10T03:45:00.000Z","2024-08-10T04:00:00.000Z","2024-08-10T04:15:00.000Z","2024-08-10T04:30:00.000Z","2024-08-10T04:45:00.000Z","2024-08-10T05:00:00.000Z","2024-08-10T05:15:00.000Z","2024-08-10T05:30:00.000Z","2024-08-10T05:45:00.000Z","2024-08-10T06:00:00.000Z","2024-08-10T06:15:00.000Z","2024-08-10T06:30:00.000Z","2024-08-10T06:45:00.000Z","2024-08-10T07:00:00.000Z","2024-08-10T07:15:00.000Z","2024-08-10T07:30:00.000Z","2024-08-10T07:45:00.000Z","2024-08-10T08:00:00.000Z","2024-08-10T08:15:00.000Z","2024-08-10T08:30:00.000Z","2024-08-10T08:45:00.000Z","2024-08-10T09:00:00.000Z","2024-08-10T09:15:00.000Z","2024-08-10T09:30:00.000Z","2024-08-10T09:45:00.000Z","2024-08-10T10:00:00.000Z","2024-08-10T10:15:00.000Z","2024-08-10T10:30:00.000Z","2024-08-10T10:45:00.000Z","2024-08-10T11:00:00.000Z","2024-08-10T11:15:00.000Z","2024-08-10T11:30:00.000Z","2024-08-10T11:45:00.000Z","2024-08-10T12:00:00.000Z","2024-08-10T12:15:00.000Z","2024-08-10T12:30:00.000Z","2024-08-10T12:45:00.000Z","2024-08-10T13:00:00.000Z","2024-08-10T13:15:00.000Z","2024-08-10T13:30:00.000Z","2024-08-10T13:45:00.000Z","2024-08-10T14:00:00.000Z","2024-08-10T14:15:00.000Z","2024-08-10T14:30:00.000Z","2024-08-10T14:45:00.000Z","2024-08-10T15:00:00.000Z","2024-08-10T15:15:00.000Z","2024-08-10T15:30:00.000Z","2024-08-10T15:45:00.000Z","2024-08-10T16:00:00.000Z","2024-08-10T16:15:00.000Z","2024-08-10T16:30:00.000Z","2024-08-10T16:45:00.000Z","2024-08-10T17:00:00.000Z","2024-08-10T17:15:00.000Z","2024-08-10T17:30:00.000Z","2024-08-10T17:45:00.000Z","2024-08-10T18:00:00.000Z","2024-08-10T18:15:00.000Z","2024-08-10T18:30:00.000Z","2024-08-10T18:45:00.000Z","2024-08-10T19:00:00.000Z","2024-08-10T19:15:00.000Z","2024-08-10T19:30:00.000Z","2024-08-10T19:45:00.000Z","2024-08-10T20:00:00.000Z","2024-08-10T20:15:00.000Z","2024-08-10T20:30:00.000Z","2024-08-10T20:45:00.000Z","2024-08-10T21:00:00.000Z","2024-08-10T21:15:00.000Z","2024-08-10T21:30:00.000Z","2024-08-10T21:45:00.000Z","2024-08-10T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.24,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0.44,0,0,3.7,3.7,7.4,11.1,11.1,8.9,7.4,7.4,7.4,7.4,4.14,3.7,3.7,3.7,2.82,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.42,0,0,0.1999999999999993,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,0.84,0,3.7,3.7,3.7,3.42,3.7,3.7,2.96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,1.04,3.7,3.7,7.4,7.4,4,0,3.7,3.7,3.7,2.5,0,3.7,3.7,3.4,3.7,3.7,3.7,3.7,7.4,7.4,4.74,0.58,3.7,3.7,1.92,0,3.7,3.7,3.7,3.7,3.12,0,0,3.7,3.7,3.7,3.7,1.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,8.300000000000001,8.300000000000001,8.300000000000001,11.1,12,12,8.300000000000001,8.300000000000001,4.600000000000001,0.9000000000000004,0.9000000000000004,3.100000000000001,4.600000000000001,4.600000000000001,4.600000000000001,4.600000000000001,7.86,8.300000000000001,8.300000000000001,8.300000000000001,9.18,12,11.22,11.1,11.1,11.1,11.1,9.640000000000001,3.82,3.44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,7.4,11.1,12,8.300000000000001,8.300000000000001,8.300000000000001,8.58,8.300000000000001,8.300000000000001,9.040000000000003,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,8.76,2.48,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><p>We can see that the Worktime power demand has been adapted to the
non-flexbile users, i.e. Visit user profile, in order to not surpass the
capacity limit of 12 kW.</p>
<p>Moreover, we can define which percentage of every user profile is
responsive to the smart charging signals with the parameter
<code>responsive</code> from <code><a href="../reference/smart_charging.html">smart_charging()</a></code> function. For
example, we can set that, during working days, 60% of the Worktime users
and 30% of the Visit user accept to participate to the demand-response
program, while during Workdays, 60% of the Visit user accept:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span>
<span><span class="va">sc_results</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/smart_charging.html">smart_charging</a></span><span class="op">(</span></span>
<span>    opt_data <span class="op">=</span> <span class="va">opt_data</span>, </span>
<span>    opt_objective <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"curtail"</span>,</span>
<span>    window_days <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    window_start_hour <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    responsive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      Workdays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Worktime <span class="op">=</span> <span class="fl">0.6</span>, Visit <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>      Weekends <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Visit <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_demand_opt</span> <span class="op">&lt;-</span> <span class="va">sc_results</span><span class="op">$</span><span class="va">sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">get_demand</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"Profile"</span><span class="op">)</span> </span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-febe03efa1a2d8d52a86" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-febe03efa1a2d8d52a86">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Visit","Worktime"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":150,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-07T22:00:00.000Z","2024-08-07T22:15:00.000Z","2024-08-07T22:30:00.000Z","2024-08-07T22:45:00.000Z","2024-08-07T23:00:00.000Z","2024-08-07T23:15:00.000Z","2024-08-07T23:30:00.000Z","2024-08-07T23:45:00.000Z","2024-08-08T00:00:00.000Z","2024-08-08T00:15:00.000Z","2024-08-08T00:30:00.000Z","2024-08-08T00:45:00.000Z","2024-08-08T01:00:00.000Z","2024-08-08T01:15:00.000Z","2024-08-08T01:30:00.000Z","2024-08-08T01:45:00.000Z","2024-08-08T02:00:00.000Z","2024-08-08T02:15:00.000Z","2024-08-08T02:30:00.000Z","2024-08-08T02:45:00.000Z","2024-08-08T03:00:00.000Z","2024-08-08T03:15:00.000Z","2024-08-08T03:30:00.000Z","2024-08-08T03:45:00.000Z","2024-08-08T04:00:00.000Z","2024-08-08T04:15:00.000Z","2024-08-08T04:30:00.000Z","2024-08-08T04:45:00.000Z","2024-08-08T05:00:00.000Z","2024-08-08T05:15:00.000Z","2024-08-08T05:30:00.000Z","2024-08-08T05:45:00.000Z","2024-08-08T06:00:00.000Z","2024-08-08T06:15:00.000Z","2024-08-08T06:30:00.000Z","2024-08-08T06:45:00.000Z","2024-08-08T07:00:00.000Z","2024-08-08T07:15:00.000Z","2024-08-08T07:30:00.000Z","2024-08-08T07:45:00.000Z","2024-08-08T08:00:00.000Z","2024-08-08T08:15:00.000Z","2024-08-08T08:30:00.000Z","2024-08-08T08:45:00.000Z","2024-08-08T09:00:00.000Z","2024-08-08T09:15:00.000Z","2024-08-08T09:30:00.000Z","2024-08-08T09:45:00.000Z","2024-08-08T10:00:00.000Z","2024-08-08T10:15:00.000Z","2024-08-08T10:30:00.000Z","2024-08-08T10:45:00.000Z","2024-08-08T11:00:00.000Z","2024-08-08T11:15:00.000Z","2024-08-08T11:30:00.000Z","2024-08-08T11:45:00.000Z","2024-08-08T12:00:00.000Z","2024-08-08T12:15:00.000Z","2024-08-08T12:30:00.000Z","2024-08-08T12:45:00.000Z","2024-08-08T13:00:00.000Z","2024-08-08T13:15:00.000Z","2024-08-08T13:30:00.000Z","2024-08-08T13:45:00.000Z","2024-08-08T14:00:00.000Z","2024-08-08T14:15:00.000Z","2024-08-08T14:30:00.000Z","2024-08-08T14:45:00.000Z","2024-08-08T15:00:00.000Z","2024-08-08T15:15:00.000Z","2024-08-08T15:30:00.000Z","2024-08-08T15:45:00.000Z","2024-08-08T16:00:00.000Z","2024-08-08T16:15:00.000Z","2024-08-08T16:30:00.000Z","2024-08-08T16:45:00.000Z","2024-08-08T17:00:00.000Z","2024-08-08T17:15:00.000Z","2024-08-08T17:30:00.000Z","2024-08-08T17:45:00.000Z","2024-08-08T18:00:00.000Z","2024-08-08T18:15:00.000Z","2024-08-08T18:30:00.000Z","2024-08-08T18:45:00.000Z","2024-08-08T19:00:00.000Z","2024-08-08T19:15:00.000Z","2024-08-08T19:30:00.000Z","2024-08-08T19:45:00.000Z","2024-08-08T20:00:00.000Z","2024-08-08T20:15:00.000Z","2024-08-08T20:30:00.000Z","2024-08-08T20:45:00.000Z","2024-08-08T21:00:00.000Z","2024-08-08T21:15:00.000Z","2024-08-08T21:30:00.000Z","2024-08-08T21:45:00.000Z","2024-08-08T22:00:00.000Z","2024-08-08T22:15:00.000Z","2024-08-08T22:30:00.000Z","2024-08-08T22:45:00.000Z","2024-08-08T23:00:00.000Z","2024-08-08T23:15:00.000Z","2024-08-08T23:30:00.000Z","2024-08-08T23:45:00.000Z","2024-08-09T00:00:00.000Z","2024-08-09T00:15:00.000Z","2024-08-09T00:30:00.000Z","2024-08-09T00:45:00.000Z","2024-08-09T01:00:00.000Z","2024-08-09T01:15:00.000Z","2024-08-09T01:30:00.000Z","2024-08-09T01:45:00.000Z","2024-08-09T02:00:00.000Z","2024-08-09T02:15:00.000Z","2024-08-09T02:30:00.000Z","2024-08-09T02:45:00.000Z","2024-08-09T03:00:00.000Z","2024-08-09T03:15:00.000Z","2024-08-09T03:30:00.000Z","2024-08-09T03:45:00.000Z","2024-08-09T04:00:00.000Z","2024-08-09T04:15:00.000Z","2024-08-09T04:30:00.000Z","2024-08-09T04:45:00.000Z","2024-08-09T05:00:00.000Z","2024-08-09T05:15:00.000Z","2024-08-09T05:30:00.000Z","2024-08-09T05:45:00.000Z","2024-08-09T06:00:00.000Z","2024-08-09T06:15:00.000Z","2024-08-09T06:30:00.000Z","2024-08-09T06:45:00.000Z","2024-08-09T07:00:00.000Z","2024-08-09T07:15:00.000Z","2024-08-09T07:30:00.000Z","2024-08-09T07:45:00.000Z","2024-08-09T08:00:00.000Z","2024-08-09T08:15:00.000Z","2024-08-09T08:30:00.000Z","2024-08-09T08:45:00.000Z","2024-08-09T09:00:00.000Z","2024-08-09T09:15:00.000Z","2024-08-09T09:30:00.000Z","2024-08-09T09:45:00.000Z","2024-08-09T10:00:00.000Z","2024-08-09T10:15:00.000Z","2024-08-09T10:30:00.000Z","2024-08-09T10:45:00.000Z","2024-08-09T11:00:00.000Z","2024-08-09T11:15:00.000Z","2024-08-09T11:30:00.000Z","2024-08-09T11:45:00.000Z","2024-08-09T12:00:00.000Z","2024-08-09T12:15:00.000Z","2024-08-09T12:30:00.000Z","2024-08-09T12:45:00.000Z","2024-08-09T13:00:00.000Z","2024-08-09T13:15:00.000Z","2024-08-09T13:30:00.000Z","2024-08-09T13:45:00.000Z","2024-08-09T14:00:00.000Z","2024-08-09T14:15:00.000Z","2024-08-09T14:30:00.000Z","2024-08-09T14:45:00.000Z","2024-08-09T15:00:00.000Z","2024-08-09T15:15:00.000Z","2024-08-09T15:30:00.000Z","2024-08-09T15:45:00.000Z","2024-08-09T16:00:00.000Z","2024-08-09T16:15:00.000Z","2024-08-09T16:30:00.000Z","2024-08-09T16:45:00.000Z","2024-08-09T17:00:00.000Z","2024-08-09T17:15:00.000Z","2024-08-09T17:30:00.000Z","2024-08-09T17:45:00.000Z","2024-08-09T18:00:00.000Z","2024-08-09T18:15:00.000Z","2024-08-09T18:30:00.000Z","2024-08-09T18:45:00.000Z","2024-08-09T19:00:00.000Z","2024-08-09T19:15:00.000Z","2024-08-09T19:30:00.000Z","2024-08-09T19:45:00.000Z","2024-08-09T20:00:00.000Z","2024-08-09T20:15:00.000Z","2024-08-09T20:30:00.000Z","2024-08-09T20:45:00.000Z","2024-08-09T21:00:00.000Z","2024-08-09T21:15:00.000Z","2024-08-09T21:30:00.000Z","2024-08-09T21:45:00.000Z","2024-08-09T22:00:00.000Z","2024-08-09T22:15:00.000Z","2024-08-09T22:30:00.000Z","2024-08-09T22:45:00.000Z","2024-08-09T23:00:00.000Z","2024-08-09T23:15:00.000Z","2024-08-09T23:30:00.000Z","2024-08-09T23:45:00.000Z","2024-08-10T00:00:00.000Z","2024-08-10T00:15:00.000Z","2024-08-10T00:30:00.000Z","2024-08-10T00:45:00.000Z","2024-08-10T01:00:00.000Z","2024-08-10T01:15:00.000Z","2024-08-10T01:30:00.000Z","2024-08-10T01:45:00.000Z","2024-08-10T02:00:00.000Z","2024-08-10T02:15:00.000Z","2024-08-10T02:30:00.000Z","2024-08-10T02:45:00.000Z","2024-08-10T03:00:00.000Z","2024-08-10T03:15:00.000Z","2024-08-10T03:30:00.000Z","2024-08-10T03:45:00.000Z","2024-08-10T04:00:00.000Z","2024-08-10T04:15:00.000Z","2024-08-10T04:30:00.000Z","2024-08-10T04:45:00.000Z","2024-08-10T05:00:00.000Z","2024-08-10T05:15:00.000Z","2024-08-10T05:30:00.000Z","2024-08-10T05:45:00.000Z","2024-08-10T06:00:00.000Z","2024-08-10T06:15:00.000Z","2024-08-10T06:30:00.000Z","2024-08-10T06:45:00.000Z","2024-08-10T07:00:00.000Z","2024-08-10T07:15:00.000Z","2024-08-10T07:30:00.000Z","2024-08-10T07:45:00.000Z","2024-08-10T08:00:00.000Z","2024-08-10T08:15:00.000Z","2024-08-10T08:30:00.000Z","2024-08-10T08:45:00.000Z","2024-08-10T09:00:00.000Z","2024-08-10T09:15:00.000Z","2024-08-10T09:30:00.000Z","2024-08-10T09:45:00.000Z","2024-08-10T10:00:00.000Z","2024-08-10T10:15:00.000Z","2024-08-10T10:30:00.000Z","2024-08-10T10:45:00.000Z","2024-08-10T11:00:00.000Z","2024-08-10T11:15:00.000Z","2024-08-10T11:30:00.000Z","2024-08-10T11:45:00.000Z","2024-08-10T12:00:00.000Z","2024-08-10T12:15:00.000Z","2024-08-10T12:30:00.000Z","2024-08-10T12:45:00.000Z","2024-08-10T13:00:00.000Z","2024-08-10T13:15:00.000Z","2024-08-10T13:30:00.000Z","2024-08-10T13:45:00.000Z","2024-08-10T14:00:00.000Z","2024-08-10T14:15:00.000Z","2024-08-10T14:30:00.000Z","2024-08-10T14:45:00.000Z","2024-08-10T15:00:00.000Z","2024-08-10T15:15:00.000Z","2024-08-10T15:30:00.000Z","2024-08-10T15:45:00.000Z","2024-08-10T16:00:00.000Z","2024-08-10T16:15:00.000Z","2024-08-10T16:30:00.000Z","2024-08-10T16:45:00.000Z","2024-08-10T17:00:00.000Z","2024-08-10T17:15:00.000Z","2024-08-10T17:30:00.000Z","2024-08-10T17:45:00.000Z","2024-08-10T18:00:00.000Z","2024-08-10T18:15:00.000Z","2024-08-10T18:30:00.000Z","2024-08-10T18:45:00.000Z","2024-08-10T19:00:00.000Z","2024-08-10T19:15:00.000Z","2024-08-10T19:30:00.000Z","2024-08-10T19:45:00.000Z","2024-08-10T20:00:00.000Z","2024-08-10T20:15:00.000Z","2024-08-10T20:30:00.000Z","2024-08-10T20:45:00.000Z","2024-08-10T21:00:00.000Z","2024-08-10T21:15:00.000Z","2024-08-10T21:30:00.000Z","2024-08-10T21:45:00.000Z","2024-08-10T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.24,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0.44,0,0,3.7,3.7,7.4,11.1,11.1,8.9,7.4,7.4,7.4,7.4,4.14,3.7,3.7,3.7,2.82,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.42,0,0,0.1999999999999993,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,0.84,0,3.7,3.7,3.7,3.42,3.7,3.7,2.96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,1.04,3.7,3.7,7.4,7.4,4,0,3.7,3.7,3.7,2.5,0,3.7,3.7,3.4,3.7,3.7,3.7,3.7,7.4,7.4,4.74,0.58,3.7,3.7,1.92,0,3.7,3.7,3.7,3.7,3.12,0,0,3.7,3.7,3.7,3.7,1.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,8.300000000000001,8.300000000000001,8.300000000000001,11.1,12,12,11.1,11.1,11.1,11.1,11.1,8.140000000000001,7.4,7.4,8.540000000000001,11.1,11.1,8.300000000000001,5.34,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,7.4,11.1,12,11.1,11.1,11.1,14.8,14.8,18.5,18.5,16.44,14.8,14.8,14.2,12,12,12,12,12,12,11.56,7.4,7.4,7.4,7.4,3.9,3.7,3.7,3.7,3.7,3.7,3.24,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script><div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">scs</span> <span class="op">&lt;&lt;-</span> <span class="va">sc_results</span><span class="op">$</span><span class="va">sessions</span></span></code></pre></div>
<p>We see that now the participation of EV users is not enough to reach
our objective. If we increase the participation of Worktime users up to
80% then we accomplish with our grid capacity again:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1234</span><span class="op">)</span></span>
<span><span class="va">sc_results</span> <span class="op">&lt;-</span> <span class="va">ev_sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu"><a href="../reference/smart_charging.html">smart_charging</a></span><span class="op">(</span></span>
<span>    opt_data <span class="op">=</span> <span class="va">opt_data</span>, </span>
<span>    opt_objective <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>    method <span class="op">=</span> <span class="st">"curtail"</span>,</span>
<span>    window_days <span class="op">=</span> <span class="fl">1</span>, </span>
<span>    window_start_hour <span class="op">=</span> <span class="fl">6</span>,</span>
<span>    responsive <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      Workdays <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Worktime <span class="op">=</span> <span class="fl">0.8</span>, Visit <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span>,</span>
<span>      Weekends <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>Visit <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ev_demand_opt</span> <span class="op">&lt;-</span> <span class="va">sc_results</span><span class="op">$</span><span class="va">sessions</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">get_demand</span><span class="op">(</span>by <span class="op">=</span> <span class="st">"Profile"</span><span class="op">)</span> </span></code></pre></div>
<div class="dygraphs html-widget html-fill-item" id="htmlwidget-1fb4450895fe099f74a1" style="width:700px;height:432.632880098888px;"></div>
<script type="application/json" data-for="htmlwidget-1fb4450895fe099f74a1">{"x":{"attrs":{"ylabel":"Power demand (kW)","labels":["minute","Visit","Worktime"],"axes":{"x":{"pixelsPerLabel":60,"drawAxis":true},"y":{"drawAxis":true}},"legend":"always","labelsDivWidth":150,"labelsShowZeroValues":true,"labelsSeparateLines":false,"hideOverlayOnMouseOut":true,"stackedGraph":true,"fillGraph":true,"fillAlpha":0.15,"stepPlot":false,"drawPoints":false,"pointSize":1,"drawGapEdgePoints":false,"connectSeparatedPoints":false,"strokeWidth":1,"strokeBorderColor":"white","colorValue":0.5,"colorSaturation":1,"includeZero":false,"drawAxesAtZero":false,"logscale":false,"axisTickSize":3,"axisLineColor":"black","axisLineWidth":0.3,"axisLabelColor":"black","axisLabelFontSize":14,"axisLabelWidth":60,"drawGrid":true,"gridLineWidth":0.3,"rightGap":5,"digitsAfterDecimal":2,"labelsKMB":false,"labelsKMG2":false,"labelsUTC":false,"maxNumberWidth":6,"animatedZooms":false,"mobileDisableYTouch":true,"retainDateWindow":true,"disableZoom":false},"scale":"minute","annotations":[],"shadings":[],"events":[{"pos":12,"label":"Grid capacity","labelLoc":"left","color":"red","strokePattern":[7,3],"axis":"y"}],"format":"date","data":[["2024-08-07T22:00:00.000Z","2024-08-07T22:15:00.000Z","2024-08-07T22:30:00.000Z","2024-08-07T22:45:00.000Z","2024-08-07T23:00:00.000Z","2024-08-07T23:15:00.000Z","2024-08-07T23:30:00.000Z","2024-08-07T23:45:00.000Z","2024-08-08T00:00:00.000Z","2024-08-08T00:15:00.000Z","2024-08-08T00:30:00.000Z","2024-08-08T00:45:00.000Z","2024-08-08T01:00:00.000Z","2024-08-08T01:15:00.000Z","2024-08-08T01:30:00.000Z","2024-08-08T01:45:00.000Z","2024-08-08T02:00:00.000Z","2024-08-08T02:15:00.000Z","2024-08-08T02:30:00.000Z","2024-08-08T02:45:00.000Z","2024-08-08T03:00:00.000Z","2024-08-08T03:15:00.000Z","2024-08-08T03:30:00.000Z","2024-08-08T03:45:00.000Z","2024-08-08T04:00:00.000Z","2024-08-08T04:15:00.000Z","2024-08-08T04:30:00.000Z","2024-08-08T04:45:00.000Z","2024-08-08T05:00:00.000Z","2024-08-08T05:15:00.000Z","2024-08-08T05:30:00.000Z","2024-08-08T05:45:00.000Z","2024-08-08T06:00:00.000Z","2024-08-08T06:15:00.000Z","2024-08-08T06:30:00.000Z","2024-08-08T06:45:00.000Z","2024-08-08T07:00:00.000Z","2024-08-08T07:15:00.000Z","2024-08-08T07:30:00.000Z","2024-08-08T07:45:00.000Z","2024-08-08T08:00:00.000Z","2024-08-08T08:15:00.000Z","2024-08-08T08:30:00.000Z","2024-08-08T08:45:00.000Z","2024-08-08T09:00:00.000Z","2024-08-08T09:15:00.000Z","2024-08-08T09:30:00.000Z","2024-08-08T09:45:00.000Z","2024-08-08T10:00:00.000Z","2024-08-08T10:15:00.000Z","2024-08-08T10:30:00.000Z","2024-08-08T10:45:00.000Z","2024-08-08T11:00:00.000Z","2024-08-08T11:15:00.000Z","2024-08-08T11:30:00.000Z","2024-08-08T11:45:00.000Z","2024-08-08T12:00:00.000Z","2024-08-08T12:15:00.000Z","2024-08-08T12:30:00.000Z","2024-08-08T12:45:00.000Z","2024-08-08T13:00:00.000Z","2024-08-08T13:15:00.000Z","2024-08-08T13:30:00.000Z","2024-08-08T13:45:00.000Z","2024-08-08T14:00:00.000Z","2024-08-08T14:15:00.000Z","2024-08-08T14:30:00.000Z","2024-08-08T14:45:00.000Z","2024-08-08T15:00:00.000Z","2024-08-08T15:15:00.000Z","2024-08-08T15:30:00.000Z","2024-08-08T15:45:00.000Z","2024-08-08T16:00:00.000Z","2024-08-08T16:15:00.000Z","2024-08-08T16:30:00.000Z","2024-08-08T16:45:00.000Z","2024-08-08T17:00:00.000Z","2024-08-08T17:15:00.000Z","2024-08-08T17:30:00.000Z","2024-08-08T17:45:00.000Z","2024-08-08T18:00:00.000Z","2024-08-08T18:15:00.000Z","2024-08-08T18:30:00.000Z","2024-08-08T18:45:00.000Z","2024-08-08T19:00:00.000Z","2024-08-08T19:15:00.000Z","2024-08-08T19:30:00.000Z","2024-08-08T19:45:00.000Z","2024-08-08T20:00:00.000Z","2024-08-08T20:15:00.000Z","2024-08-08T20:30:00.000Z","2024-08-08T20:45:00.000Z","2024-08-08T21:00:00.000Z","2024-08-08T21:15:00.000Z","2024-08-08T21:30:00.000Z","2024-08-08T21:45:00.000Z","2024-08-08T22:00:00.000Z","2024-08-08T22:15:00.000Z","2024-08-08T22:30:00.000Z","2024-08-08T22:45:00.000Z","2024-08-08T23:00:00.000Z","2024-08-08T23:15:00.000Z","2024-08-08T23:30:00.000Z","2024-08-08T23:45:00.000Z","2024-08-09T00:00:00.000Z","2024-08-09T00:15:00.000Z","2024-08-09T00:30:00.000Z","2024-08-09T00:45:00.000Z","2024-08-09T01:00:00.000Z","2024-08-09T01:15:00.000Z","2024-08-09T01:30:00.000Z","2024-08-09T01:45:00.000Z","2024-08-09T02:00:00.000Z","2024-08-09T02:15:00.000Z","2024-08-09T02:30:00.000Z","2024-08-09T02:45:00.000Z","2024-08-09T03:00:00.000Z","2024-08-09T03:15:00.000Z","2024-08-09T03:30:00.000Z","2024-08-09T03:45:00.000Z","2024-08-09T04:00:00.000Z","2024-08-09T04:15:00.000Z","2024-08-09T04:30:00.000Z","2024-08-09T04:45:00.000Z","2024-08-09T05:00:00.000Z","2024-08-09T05:15:00.000Z","2024-08-09T05:30:00.000Z","2024-08-09T05:45:00.000Z","2024-08-09T06:00:00.000Z","2024-08-09T06:15:00.000Z","2024-08-09T06:30:00.000Z","2024-08-09T06:45:00.000Z","2024-08-09T07:00:00.000Z","2024-08-09T07:15:00.000Z","2024-08-09T07:30:00.000Z","2024-08-09T07:45:00.000Z","2024-08-09T08:00:00.000Z","2024-08-09T08:15:00.000Z","2024-08-09T08:30:00.000Z","2024-08-09T08:45:00.000Z","2024-08-09T09:00:00.000Z","2024-08-09T09:15:00.000Z","2024-08-09T09:30:00.000Z","2024-08-09T09:45:00.000Z","2024-08-09T10:00:00.000Z","2024-08-09T10:15:00.000Z","2024-08-09T10:30:00.000Z","2024-08-09T10:45:00.000Z","2024-08-09T11:00:00.000Z","2024-08-09T11:15:00.000Z","2024-08-09T11:30:00.000Z","2024-08-09T11:45:00.000Z","2024-08-09T12:00:00.000Z","2024-08-09T12:15:00.000Z","2024-08-09T12:30:00.000Z","2024-08-09T12:45:00.000Z","2024-08-09T13:00:00.000Z","2024-08-09T13:15:00.000Z","2024-08-09T13:30:00.000Z","2024-08-09T13:45:00.000Z","2024-08-09T14:00:00.000Z","2024-08-09T14:15:00.000Z","2024-08-09T14:30:00.000Z","2024-08-09T14:45:00.000Z","2024-08-09T15:00:00.000Z","2024-08-09T15:15:00.000Z","2024-08-09T15:30:00.000Z","2024-08-09T15:45:00.000Z","2024-08-09T16:00:00.000Z","2024-08-09T16:15:00.000Z","2024-08-09T16:30:00.000Z","2024-08-09T16:45:00.000Z","2024-08-09T17:00:00.000Z","2024-08-09T17:15:00.000Z","2024-08-09T17:30:00.000Z","2024-08-09T17:45:00.000Z","2024-08-09T18:00:00.000Z","2024-08-09T18:15:00.000Z","2024-08-09T18:30:00.000Z","2024-08-09T18:45:00.000Z","2024-08-09T19:00:00.000Z","2024-08-09T19:15:00.000Z","2024-08-09T19:30:00.000Z","2024-08-09T19:45:00.000Z","2024-08-09T20:00:00.000Z","2024-08-09T20:15:00.000Z","2024-08-09T20:30:00.000Z","2024-08-09T20:45:00.000Z","2024-08-09T21:00:00.000Z","2024-08-09T21:15:00.000Z","2024-08-09T21:30:00.000Z","2024-08-09T21:45:00.000Z","2024-08-09T22:00:00.000Z","2024-08-09T22:15:00.000Z","2024-08-09T22:30:00.000Z","2024-08-09T22:45:00.000Z","2024-08-09T23:00:00.000Z","2024-08-09T23:15:00.000Z","2024-08-09T23:30:00.000Z","2024-08-09T23:45:00.000Z","2024-08-10T00:00:00.000Z","2024-08-10T00:15:00.000Z","2024-08-10T00:30:00.000Z","2024-08-10T00:45:00.000Z","2024-08-10T01:00:00.000Z","2024-08-10T01:15:00.000Z","2024-08-10T01:30:00.000Z","2024-08-10T01:45:00.000Z","2024-08-10T02:00:00.000Z","2024-08-10T02:15:00.000Z","2024-08-10T02:30:00.000Z","2024-08-10T02:45:00.000Z","2024-08-10T03:00:00.000Z","2024-08-10T03:15:00.000Z","2024-08-10T03:30:00.000Z","2024-08-10T03:45:00.000Z","2024-08-10T04:00:00.000Z","2024-08-10T04:15:00.000Z","2024-08-10T04:30:00.000Z","2024-08-10T04:45:00.000Z","2024-08-10T05:00:00.000Z","2024-08-10T05:15:00.000Z","2024-08-10T05:30:00.000Z","2024-08-10T05:45:00.000Z","2024-08-10T06:00:00.000Z","2024-08-10T06:15:00.000Z","2024-08-10T06:30:00.000Z","2024-08-10T06:45:00.000Z","2024-08-10T07:00:00.000Z","2024-08-10T07:15:00.000Z","2024-08-10T07:30:00.000Z","2024-08-10T07:45:00.000Z","2024-08-10T08:00:00.000Z","2024-08-10T08:15:00.000Z","2024-08-10T08:30:00.000Z","2024-08-10T08:45:00.000Z","2024-08-10T09:00:00.000Z","2024-08-10T09:15:00.000Z","2024-08-10T09:30:00.000Z","2024-08-10T09:45:00.000Z","2024-08-10T10:00:00.000Z","2024-08-10T10:15:00.000Z","2024-08-10T10:30:00.000Z","2024-08-10T10:45:00.000Z","2024-08-10T11:00:00.000Z","2024-08-10T11:15:00.000Z","2024-08-10T11:30:00.000Z","2024-08-10T11:45:00.000Z","2024-08-10T12:00:00.000Z","2024-08-10T12:15:00.000Z","2024-08-10T12:30:00.000Z","2024-08-10T12:45:00.000Z","2024-08-10T13:00:00.000Z","2024-08-10T13:15:00.000Z","2024-08-10T13:30:00.000Z","2024-08-10T13:45:00.000Z","2024-08-10T14:00:00.000Z","2024-08-10T14:15:00.000Z","2024-08-10T14:30:00.000Z","2024-08-10T14:45:00.000Z","2024-08-10T15:00:00.000Z","2024-08-10T15:15:00.000Z","2024-08-10T15:30:00.000Z","2024-08-10T15:45:00.000Z","2024-08-10T16:00:00.000Z","2024-08-10T16:15:00.000Z","2024-08-10T16:30:00.000Z","2024-08-10T16:45:00.000Z","2024-08-10T17:00:00.000Z","2024-08-10T17:15:00.000Z","2024-08-10T17:30:00.000Z","2024-08-10T17:45:00.000Z","2024-08-10T18:00:00.000Z","2024-08-10T18:15:00.000Z","2024-08-10T18:30:00.000Z","2024-08-10T18:45:00.000Z","2024-08-10T19:00:00.000Z","2024-08-10T19:15:00.000Z","2024-08-10T19:30:00.000Z","2024-08-10T19:45:00.000Z","2024-08-10T20:00:00.000Z","2024-08-10T20:15:00.000Z","2024-08-10T20:30:00.000Z","2024-08-10T20:45:00.000Z","2024-08-10T21:00:00.000Z","2024-08-10T21:15:00.000Z","2024-08-10T21:30:00.000Z","2024-08-10T21:45:00.000Z","2024-08-10T22:00:00.000Z"],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.24,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,3.7,3.7,3.7,0.46,0,0,3.7,3.7,7.4,11.1,11.1,8.9,7.4,7.4,7.4,7.4,4.140000000000001,3.7,3.7,3.7,2.82,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.42,0,0,0.03999999999999915,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,0.88,0,3.7,3.7,3.7,3.42,3.7,3.7,2.96,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,1.04,3.7,3.7,7.4,7.4,4,0,3.7,3.7,3.7,2.5,0,3.7,3.7,3.4,3.7,3.7,3.7,3.7,7.4,7.4,4.74,0.58,3.7,3.7,1.92,0,3.7,3.7,3.7,3.7,3.12,0,0,3.7,3.7,3.7,3.7,1.04,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,8.300000000000001,8.300000000000001,8.300000000000001,11.1,12,12,8.300000000000001,8.300000000000001,4.600000000000001,0.9000000000000004,0.9000000000000004,3.100000000000001,4.600000000000001,4.600000000000001,4.600000000000001,4.600000000000001,7.86,8.300000000000001,8.300000000000001,8.300000000000001,9.18,12,11.22,11.1,11.1,11.1,11.1,9.640000000000001,3.82,3.44,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.7,3.7,3.7,3.7,7.4,11.1,12,8.300000000000001,8.300000000000001,8.300000000000001,8.580000000000002,8.300000000000001,8.300000000000001,9.040000000000003,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,11.58,11.1,11.1,9.48,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],"fixedtz":true,"tzone":"Europe/Amsterdam","css":"/* Dygraph styling */\n\n.dygraph-title {\n  text-align: left;\n  font-weight: normal;\n  font-size: 70%;\n}\n\n.dygraph-legend {\n  color: white;\n  background-color: #BABABA !important;\n    padding-left:5px;\n  border-color:#BABABA;\n    border-style:solid;\n  border-width:thin;\n  transition:0s 4s;\n  z-index: 20 !important;\n  box-shadow: 2px 2px 5px rgba(0, 0, 0, .3);\n  border-radius: 3px;\n}\n\n.dygraph-legend:hover{\n  transform: translate(-110%);\n  transition: 0s;\n}\n\n.dygraph-legend > span {\n  color: black;\n  padding-left:5px;\n  margin-left:-5px;\n  background-color: white !important;\n  display: block;\n}\n\n.dygraph-legend > span > span{\n  display: inline;\n}\n\n.highlight {\n  border-left: 2px solid #BABABA;\n  padding-left:3px !important;\n\n}"},"evals":[],"jsHooks":[]}</script>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Cañigueral.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
