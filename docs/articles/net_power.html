<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="flextools">
<title>Net power minimization • flextools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Net power minimization">
<meta property="og:description" content="flextools">
<meta property="og:image" content="mcanigueral.github.io/flextools/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary" data-bs-theme="dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">flextools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/net_power.html">Net power minimization</a>
    <a class="dropdown-item" href="../articles/optimize_demand.html">Optimize demand</a>
    <a class="dropdown-item" href="../articles/smart_charging.html">Smart charging</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Net power minimization</h1>
            
      
      
      <div class="d-none name"><code>net_power.Rmd</code></div>
    </div>

    
    
<p>Functions <code>optimize_demand</code> or <code>smart_charging</code>
make use of Quadratic programming in order to obtain the optimal power
load given certain conditions. The Quadratic programming problem can be
formulated according to multiple objectives. Currently flextools package
allows to optimize a time-series power load considering two different
goals:</p>
<ul>
<li>Minimize the power exchanged with the grid (net power)</li>
<li>Minimize the energy cost</li>
</ul>
<p>In this article, we’ll cover the optimization problem for the first
objective: <strong>net power minimization</strong>.</p>
<div class="section level2">
<h2 id="problem-formulation">Problem formulation<a class="anchor" aria-label="anchor" href="#problem-formulation"></a>
</h2>
<p>Our <strong>net power minimization</strong> algorithm has been
designed with multiple objectives:</p>
<ol style="list-style-type: decimal">
<li>Minimize the energy exchanged with the distribution grid maximizing
the use of local generation</li>
<li>Obtain a demand profile the most flat as possible (peak
shaving)</li>
</ol>
<p>Like all optimization problems, an optimization process requires to
formulate the problem and then find the proper optimization algorithm to
solve this formulation. In this case, since the problem resulted to have
quadratic terms, a Quadratic Programming algorithm has been used to
solve it.</p>
<p>The objective function (Equation @ref(eq:opt-objective)) and
constraints (Equations @ref(eq:opt-constraint-energy) -
@ref(eq:opt-constraint-identity-backward)) of this optimization problem
are represented below, where:</p>
<ul>
<li>
<span class="math inline">\(T\)</span> : Number of time intervals
within the optimization window</li>
<li>
<span class="math inline">\(G_t\)</span> : Local power generation
time-series vector</li>
<li>
<span class="math inline">\(LS_t\)</span> : Non-flexible load
time-series vector</li>
<li>
<span class="math inline">\(LF_t\)</span> : Flexible load
time-series vector (if not optimized)</li>
<li>
<span class="math inline">\(O_t\)</span> : Optimal flexible load
time-series vector</li>
<li>
<span class="math inline">\(LFmax\)</span> : Maximum power demand
for the flexible load</li>
<li>
<span class="math inline">\(GC_t\)</span> : Grid power capacity
time-series vector</li>
</ul>
<p><span class="math display">\[\begin{equation}
  min \sum_{t=1}^{T} (R_t-L_t-O_t)^2
  (\#eq:opt-objective)
\end{equation}\]</span></p>
<p>Moreover, this energy optimization problem has the following
constraints:
<!-- Equations \@ref(eq:opt-constraint-energy) and \@ref(eq:opt-constraint-limits) --></p>
<ul>
<li>The energy consumed by the flexible load must remain the same than
the expected behavior:</li>
</ul>
<p><span class="math display">\[\begin{equation}
  \sum_{t=1}^T O_t \Delta t = \sum_{t=1}^T LF_t \Delta t
  (\#eq:opt-constraint-energy)
\end{equation}\]</span></p>
<ul>
<li>Optimal flexible load must be lower than a certain maximum
power:</li>
</ul>
<p><span class="math display">\[\begin{equation}
  0 \le O_t \le LFmax_t \quad t \in T
  (\#eq:opt-constraint-limits)
\end{equation}\]</span></p>
<ul>
<li>The energy balance between generation and loads must be lower than
the grid capacity:</li>
</ul>
<p><span class="math display">\[\begin{equation}
  0 \le O_t \le GC_t + G_t - LS_t \quad t \in T
  (\#eq:opt-constraint-limits)
\end{equation}\]</span></p>
<p>At the same time, we can optimize the flexible energy demand with two
opposite approaches:</p>
<ol style="list-style-type: lower-alpha">
<li>Postpone the consumption to later time-slots (shift the energy
<em>forward</em>)</li>
<li>Consume now (store) the energy that will be consumed later (shift
the energy <em>backward</em>)</li>
</ol>
<p>We consider both approaches for different objectives or applications.
The energy shift is always done within a maximum <strong>time
horizon</strong> (<span class="math inline">\(h\)</span>) to consider
realistic scenarios. For example, the time horizon for the energy demand
of a water boiler could have a time horizon of 6 hours, because it
wouldn’t make sense to heat the water more than 6 hours before the final
consumption. Each one of these approaches brings extra constraints to
the optimization problem:</p>
<p>If the energy can only be shifted <strong>forward</strong>:</p>
<ul>
<li>The cumulative sum of the optimal load <span class="math inline">\(O\)</span> must be higher than the cumulative sum
of the original flexible load <span class="math inline">\(LF\)</span>
except the last <span class="math inline">\(h\)</span> time slots, and
lower than the total cumulative sum of the original flexible load <span class="math inline">\(LF\)</span> (energy can only be shifted
forwards):</li>
</ul>
<p><span class="math display">\[\begin{equation}
  \sum_{t = 1}^{u-h} LF_t \le \sum_{t=1}^u O_t \le \sum_{t=1}^u LF_t
\quad u = 1 \dots T
  (\#eq:opt-constraint-cumsum-forward)
\end{equation}\]</span></p>
<ul>
<li>The maximum values for the optimal demand <span class="math inline">\(O_t\)</span> will depend on the time horizon <span class="math inline">\(h\)</span>:</li>
</ul>
<p><span class="math display">\[\begin{equation}
  O_u \le \sum_{t = u-h}^u LF_t \quad u = 1 \dots T
  (\#eq:opt-constraint-identity-forward)
\end{equation}\]</span></p>
<p>If the energy can only be shifted <strong>backward</strong>:</p>
<ul>
<li>The cumulative sum of the optimal demand <span class="math inline">\(O\)</span> must be higher than the total
cumulative sum of the original demand <span class="math inline">\(LF\)</span> (energy can only be shifted
backwards), and lower than the cumulative sum of the original demand
<span class="math inline">\(LF\)</span> except the following <span class="math inline">\(h\)</span> time slots:</li>
</ul>
<p><span class="math display">\[\begin{equation}
  \sum_{t=1}^u LF_t \le \sum_{t=1}^u O_t \le \sum_{t=1}^{u+h} LF_t \quad
u = 1 \dots T
  (\#eq:opt-constraint-cumsum-backward)
\end{equation}\]</span></p>
<ul>
<li>The maximum values for the optimal demand <span class="math inline">\(O_t\)</span> will depend on the time horizon <span class="math inline">\(h\)</span>:</li>
</ul>
<p><span class="math display">\[\begin{equation}
  O_u \le \sum_{t = u}^{u+h} LF_t \quad u = 1 \dots T
  (\#eq:opt-constraint-identity-backward)
\end{equation}\]</span></p>
</div>
<div class="section level2">
<h2 id="quadratic-programming">Quadratic programming<a class="anchor" aria-label="anchor" href="#quadratic-programming"></a>
</h2>
<p>Considering that the objective function of this problem (Equation
@ref(eq:opt-objective)) has quadratic terms, a Quadratic Programming
algorithm must be used. In this case we have used the R package {osqp},
visit their <a href="https://osqp.org/" class="external-link">website</a> for more
information.</p>
<p>The form of a <a href="https://osqp.org/docs/solver/index.html" class="external-link">quadratic problem</a>
is:</p>
<p><span class="math display">\[\begin{equation}
  \begin{array}{ll}
  \text{minimize} &amp; \mathrm (1/2) x^\top \mathrm P \, \mathrm x +
\mathrm q^{\top} \mathrm x \\
  \text{subject to} &amp; \mathrm G \mathrm x \leq \mathrm h \\
                    &amp; \mathrm A \mathrm x = \mathrm b
  \end{array}
  (\#eq:cvx-formulation)
\end{equation}\]</span></p>
<p>The OSQP function <code>osqp::solve_osqp(P, q, A, l, u)</code>
requires the parameters <code>P</code>, <code>q</code>, <code>A</code>,
<code>l</code> and <code>u</code>. These parameters must be extracted
from our problem formulation, so developing the objective function in
Equation @ref(eq:opt-objective) we can create <code>P</code> and
<code>q</code> and from constraints @ref(eq:opt-constraint-energy),
@ref(eq:opt-constraint-limits), @ref(eq:opt-constraint-cumsum-forward),
@ref(eq:opt-constraint-identity-forward),
@ref(eq:opt-constraint-cumsum-backward) and
@ref(eq:opt-constraint-identity-backward) we can create <code>A</code>,
<code>l</code> and <code>u</code>.</p>
<p>The theoretical expressions from the problem definition are
translated to the function’s required parameters using arrays and
vectors. To illustrate this step, some equations are presented in the
form of arrays considering a number of time slots of <span class="math inline">\(T=8\)</span> and a time horizon of <span class="math inline">\(h=3\)</span>.</p>
<p>Equation @ref(eq:opt-constraint-cumsum-forward): <span class="math display">\[\begin{equation}
\sum_{t = 1}^{u-3} LF_t \le \sum_{t=1}^u O_t \le \sum_{t=1}^u LF_t \quad
u = 1 \dots 8

\\

\begin{bmatrix}
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
\end{bmatrix}
\times
\begin{bmatrix}
LF_1\\
LF_2\\
LF_3\\
LF_4\\
LF_5\\
LF_6\\
LF_7\\
LF_8
\end{bmatrix}

\le

\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
O_1\\
O_2\\
O_3\\
O_4\\
O_5\\
O_6\\
O_7\\
O_8
\end{bmatrix}

\le

\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
LF_1\\
LF_2\\
LF_3\\
LF_4\\
LF_5\\
LF_6\\
LF_7\\
LF_8
\end{bmatrix}
\end{equation}\]</span></p>
<p>Equation @ref(eq:opt-constraint-identity-forward): <span class="math display">\[\begin{equation}
O_u \le \sum_{t = u - 3}^u LF_t \quad u = 1 \dots 8

\\

\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
O_1\\
O_2\\
O_3\\
O_4\\
O_5\\
O_6\\
O_7\\
O_8
\end{bmatrix}
\le
\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
LF_1\\
LF_2\\
LF_3\\
LF_4\\
LF_5\\
LF_6\\
LF_7\\
LF_8
\end{bmatrix}
\end{equation}\]</span></p>
<p>Equation @ref(eq:opt-constraint-cumsum-backward):</p>
<p><span class="math display">\[\begin{equation}
\sum_{t=1}^u LF_t \le \sum_{t=1}^u O_t \le \sum_{t=1}^{u+3} LF_t \quad u
= 1 \dots 8

\\

\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
LF_1\\
LF_2\\
LF_3\\
LF_4\\
LF_5\\
LF_6\\
LF_7\\
LF_8
\end{bmatrix}

\le

\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
O_1\\
O_2\\
O_3\\
O_4\\
O_5\\
O_6\\
O_7\\
O_8
\end{bmatrix}

\le

\begin{bmatrix}
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
LF_1\\
LF_2\\
LF_3\\
LF_4\\
LF_5\\
LF_6\\
LF_7\\
LF_8
\end{bmatrix}
\end{equation}\]</span></p>
<p>Equation @ref(eq:opt-constraint-identity-backward):</p>
<p><span class="math display">\[\begin{equation}
O_u \le \sum_{t = u}^{u+3} LF_t \quad u = 1 \dots 8

\\

\begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
O_1\\
O_2\\
O_3\\
O_4\\
O_5\\
O_6\\
O_7\\
O_8
\end{bmatrix}
\le
\begin{bmatrix}
1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1 &amp; 0\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1 &amp; 1\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1 &amp; 1\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1 &amp; 1\\
0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 0 &amp; 1\\
\end{bmatrix}
\times
\begin{bmatrix}
LF_1\\
LF_2\\
LF_3\\
LF_4\\
LF_5\\
LF_6\\
LF_7\\
LF_8
\end{bmatrix}
\end{equation}\]</span></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Marc Cañigueral.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
